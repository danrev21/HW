===================================================================================================================
# RUN
выполнит любые команды в новом слое поверх текущего изображения и зафиксирует результаты. Полученный образ будет использоваться для следующего шага в Dockerfile.
  Имеет две формы:
  RUN <command> (shell form, the command is run in a shell, which by default is /bin/sh -c on Linux or cmd /S /C on Windows)
  RUN ["executable", "param1", "param2"] (exec form)

  Инструкции по слоям RUN и генерация коммитов соответствуют основным концепциям Docker, где коммиты дешевы, а контейнеры можно создавать из любой точки истории образа, как в системе управления версиями.

  Форма exec позволяет избежать искажения строки оболочки и RUN команд, использующих базовый образ, который не содержит указанный исполняемый файл оболочки.

  Оболочку по умолчанию для формы оболочки можно изменить с помощью SHELL команды.

  В форме shell вы можете использовать \(обратная косая черта), чтобы продолжить одну инструкцию RUN на следующей строке. Например, рассмотрим эти две строки:

RUN /bin/bash -c 'source $HOME/.bashrc && \
    echo $HOME'
  Вместе они эквивалентны этой единственной строке:
  
RUN /bin/bash -c 'source $HOME/.bashrc && echo $HOME'

  Чтобы использовать другую оболочку, отличную от '/bin/sh', используйте форму exec, передаваемую в нужную оболочку. Например:

RUN ["/bin/bash", "-c", "echo hello"]

Примечание:
Форма exec анализируется как массив JSON, что означает, что вы должны использовать двойные кавычки (") вокруг слов, а не одинарные кавычки (').

  В отличие от формы оболочки, форма exec не вызывает командную оболочку. Это означает, что нормальной обработки оболочки не происходит. 
  Например RUN [ "echo", "$HOME" ] не будет делать подстановку переменных на $HOME. Если вам нужна обработка оболочки, используйте форму оболочки или запустите оболочку напрямую, например: 
  
RUN [ "sh", "-c", "echo $HOME" ]. 
  
  При использовании формы exec и непосредственном выполнении оболочки, как и в случае с формой оболочки, расширение переменной среды выполняет оболочка, а не docker.
  
  Кэш для RUN инструкций не становится недействительным автоматически во время следующей сборки. Кэш для инструкции RUN apt-get dist-upgrade -y будет повторно использован во время следующей сборки. Кэш инструкций можно сделать недействительным , например, RUN с помощью флага .--no-cachedocker build --no-cache

See the Dockerfile Best Practices guide for more information.

Кэш для RUN инструкций может быть аннулирован с помощью инструкций ADD и COPY.
