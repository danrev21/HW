- Создание сетей Docker для облегчения связи между контейнерами.
- Проверка и сбор информации о существующих сетях Docker.
- Установление соединений путем присоединения контейнеров к конкретным сетям.
- Изучение дополнительных функций и конфигураций, связанных с сетью Docker.


Сетевые драйверы
Сетевая подсистема Docker подключается с помощью драйверов. По умолчанию существует несколько драйверов, которые обеспечивают основные сетевые функции:

docker info | grep Network

- bridge : сетевой драйвер по умолчанию. Bridge сети обычно используются, когда ваши приложения работают в автономных контейнерах, которым необходимо взаимодействовать.
- host : для автономных контейнеров удалите сетевую изоляцию между контейнером и хостом Docker и используйте сеть хоста напрямую.
- overlay : оверлейные сети соединяют несколько демонов Docker вместе и позволяют службам Swarm взаимодействовать друг с другом.
- macvlan : Сети Macvlan позволяют вам назначать MAC-адрес контейнеру, делая его видимым как физическое устройство в вашей сети. Использование драйвера macvlan иногда является лучшим выбором при работе с устаревшими приложениями, которые ожидают прямого подключения к физической сети, а не маршрутизации через сетевой стек хоста Docker.
- null : для этого контейнера отключите всю сеть. Обычно он используется вместе с собственным сетевым драйвером.

====================================================================================================================
# HOST Network
If you use the host network mode for a container, that container's network stack isn't isolated from the Docker host (the container shares the host's networking namespace), and the container doesn't get its own IP-address allocated. For instance, if you run a container which binds to port 80 and you use host networking, the container's application is available on port 80 on the host's IP address.
Host mode networking can be useful for the following use cases:
- To optimize performance
- In situations where a container needs to handle a large range of ports
This is because it doesn't require network address translation (NAT), and no "userland-proxy" is created for each port.

=====================================================================================================================
# Bridge network
С точки зрения сети bridge сеть представляет собой устройство канального уровня, которое перенаправляет трафик между сегментами сети. bridge может быть аппаратным или программным устройством, работающим в ядре хост-машины.

С точки зрения Docker, bridge сеть использует программный мост, который позволяет контейнерам, подключенным к одной и той же мостовой сети, взаимодействовать, обеспечивая при этом изоляцию от контейнеров, которые не подключены к этой мостовой сети. Драйвер bridge Docker автоматически устанавливает правила на хост-компьютере, чтобы контейнеры в разных сетях мостов не могли напрямую взаимодействовать друг с другом.

Сети bridge применяются к контейнерам, работающим на одном хосте демона Docker. Для связи между контейнерами, работающими на разных хостах демона Docker, вы можете либо управлять маршрутизацией на уровне ОС, либо использовать оверлейную сеть .

Когда вы запускаете Docker, автоматически создается default bridge network (также называемая ), и вновь запущенные контейнеры подключаются к ней, если не указано иное. Вы также можете создавать user-defined bridge networks. 
User-defined bridge networks, превосходят default bridge network.

# Различия между User-defined bridges и default bridge:
# User-defined bridges обеспечивают автоматическое разрешение DNS между контейнерами .
Контейнеры в default bridge network могут обращаться друг к другу только по IP-адресам, если только вы не используете опцию --link, которая считается устаревшей. В user-defined bridge networks контейнеры могут разрешать друг друга по имени или псевдониму.

Представьте себе приложение с веб-интерфейсом и серверной частью базы данных. Если вы вызываете свои контейнеры webи db, веб-контейнер может подключиться к контейнеру базы данных по адресу db, независимо от того, на каком хосте Docker работает стек приложения.

Если вы запускаете тот же стек приложений в default bridge network, вам необходимо вручную создать связи между контейнерами (используя устаревший --link флаг). Эти ссылки необходимо создавать в обоих направлениях, поэтому вы можете видеть, что это усложняется, когда требуется взаимодействовать более чем с двумя контейнерами. Альтернативно вы можете манипулировать /etc/hosts файлами внутри контейнеров, но это создает проблемы, которые трудно отладить.

# User-defined bridges обеспечивают лучшую изоляцию .
Все контейнеры, не --network указанные, подключаются к default bridge network. Это может быть риском, поскольку несвязанные стеки/сервисы/контейнеры могут взаимодействовать друг с другом.

Использование user-defined bridge networks обеспечивает сеть с ограниченной областью действия, в которой могут взаимодействовать только контейнеры, подключенные к этой сети.

# Контейнеры можно присоединять и отключать от определяемых пользователем сетей на лету .
В течение всего срока службы контейнера вы можете на лету подключать или отключать его от user-defined networks. Чтобы удалить контейнер из default bridge network, вам необходимо остановить контейнер и воссоздать его с другими параметрами сети.

# Каждая User-defined network создает настраиваемый bridge.
Если ваши контейнеры используют default bridge network, вы можете настроить ее, но все контейнеры будут использовать одни и те же параметры, такие как MTU и iptables правила. Кроме того, настройка default bridge network происходит вне самого Docker и требует перезапуска Docker.

# User-defined bridge networks создаются и настраиваются с помощью docker network create. 
Если разные группы приложений имеют разные требования к сети, вы можете настроить каждый user-defined bridge отдельно по мере его создания.

# Связанные контейнеры в переменных среды общей сетевой среды моста по умолчанию .
Первоначально единственным способом совместного использования переменных среды между двумя контейнерами было связывание их с помощью --link флага . Этот тип совместного использования переменных невозможен в сетях, определяемых пользователем. Однако существуют более эффективные способы совместного использования переменных среды. 

Несколько идей:
    - Несколько контейнеров могут монтировать файл или каталог, содержащий общую информацию, используя том Docker.
    - Несколько контейнеров можно запустить вместе, docker-composeа в файле компоновки можно определить общие переменные.
    - Вы можете использовать swarm services вместо автономных контейнеров и использовать преимущества общих секретов и конфигураций .

Контейнеры, подключенные к одной и той же user-defined bridge networks, эффективно предоставляют все порты друг другу. Чтобы порт был доступен контейнерам или хостам, не поддерживающим Docker, в разных сетях, этот порт должен быть опубликован с использованием флага -p или --publish .